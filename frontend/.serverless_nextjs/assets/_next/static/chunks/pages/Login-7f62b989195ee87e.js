(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{2657:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Login",function(){return c(5895)}])},5895:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return z},"default":function(){return A}});var d=c(5893),e=c(2980),f=c(8969),g=c(4051),h=c.n(g),i=c(8633),j=c(1163),k=c(7294),l=c(2697),m=c(9669),n=c.n(m),o=c(155),p=c(1872);function q(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function r(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function s(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){r(f,d,e,g,h,"next",a)}function h(a){r(f,d,e,g,h,"throw",a)}g(void 0)})}}function t(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function u(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){t(a,b,c[b])})}return a}var v=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%]).{8,24}$/,w=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/;function x(a){var b,c,e=a.providers;(c=1,(function(a){if(Array.isArray(a))return a})(b=(0,i.kP)())||(function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}})(b,c)||(function(a,b){if(a){if("string"==typeof a)return q(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return q(a,b)}})(b,c)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})())[0];var f=(0,k.useState)(""),g=f[0],m=f[1],r=(0,k.useState)("");r[0],r[1],(0,k.useRef)(null);var t=(0,k.useRef)(null),x=(0,k.useState)(""),y=x[0],z=x[1],A=(0,k.useState)(!1),B=A[0],C=A[1],D=(0,k.useState)(!1),E=D[0],F=D[1],G=(0,k.useState)(!1),H=G[0],I=G[1],J=(0,k.useState)(!1),K=J[0],L=J[1],M=(0,k.useState)(""),N=M[0],O=M[1],P=(0,k.useState)(!1),Q=P[0],R=P[1];(0,k.useEffect)(function(){I(w.test(g))},[g]),(0,k.useEffect)(function(){C(v.test(y))},[y]),(0,k.useEffect)(function(){O("")},[y,g]);var S,T,U=(S=s(h().mark(function a(b){var c,d,e,f,i;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.preventDefault(),c=v.test(y),d=w.test(g),c){a.next=6;break}return O("Dato Invalido"),a.abrupt("return");case 6:return a.prev=6,a.next=9,n().post("http://localhost:1337/api/auth/local",JSON.stringify({email:g,password:y}),{headers:{"Content-Type":"application/json"},withCredentials:!0});case 9:e=a.sent,console.log(null==e?void 0:e.data),console.log(null==e?void 0:e.data.jwt),console.log(JSON.stringify(e)),R(!0),z(""),a.next=22;break;case 17:a.prev=17,a.t0=a.catch(6),(f=!a.t0).response?O("Server non raggiungibile"):(null===(i=a.t0.response)|| void 0===i?void 0:i.status)===400&&O("Login fallito"),t.current.focus();case 22:case"end":return a.stop()}},a,null,[[6,17]])})),function(a){return S.apply(this,arguments)}),V=(0,k.useContext)(l.Z);return(0,k.useCallback)((T=s(h().mark(function a(b,c){var d,e,f,g;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d={identifier:b,password:c},console.log(d),a.next=4,fetch("".concat("http://localhost:1337","/api/auth/local"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"*"},body:JSON.stringify(d)});case 4:return e=a.sent,a.next=7,e.json();case 7:if(f=a.sent,console.log(f),!e.ok){a.next=13;break}localStorage.setItem("email user local auth",f.user.email),j.default.push("/"),V.setValue(u({},V.value,{loginInfo:d})),a.next=19;break;case 13:return g="I dati inseriti non son validi",a.next=16,g;case 16:return a.t0=a.sent,a.t1={ErrorMessage:a.t0},a.abrupt("return",{props:a.t1});case 19:case"end":return a.stop()}},a)})),function(a,b){return T.apply(this,arguments)}),[V]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"flex h-screen flex-col justify-center bg-beige-400 px-6 py-4",children:(0,d.jsx)("div",{className:" sm:mx-auto sm:w-full sm:max-w-md",children:(0,d.jsxs)("div",{className:"rounded-2xl bg-beige-100 py-8 px-[1.9rem] shadow-lg sm:py-10",children:[(0,d.jsx)("p",{className:"mb-4 -mt-2 text-center text-4xl font-normal text-beige-900",children:"Accedi"}),Q?(0,d.jsxs)("section",{children:[(0,d.jsx)("h1",{children:"Registrazione effettuata con successo!"}),(0,d.jsx)("p",{children:(0,d.jsx)("a",{href:"#",children:"Accedi"})})]}):(0,d.jsxs)("section",{children:[(0,d.jsx)("p",{ref:t,className:N?"errmsg":"offscreen easy-in-out transition duration-300","aria-live":"assertive",children:N}),(0,d.jsxs)("form",{onSubmit:U,className:"flex flex-col",children:[(0,d.jsxs)("label",{htmlFor:"email",className:"mb-2 flex flex-auto justify-between",children:["Email",(0,d.jsx)(p.sez,{className:H?"valid":"hidden"}),(0,d.jsx)(o.IOM,{className:H||!g?"hidden":"invalid"})]}),(0,d.jsx)("input",{type:"email",id:"email",onChange:function(a){return m(a.target.value)},value:g,placeholder:"Inserisci una email valida 🔎",required:!0,"aria-invalid":H?"false":"true","aria-describedby":"emailnote",onFocus:function(){return L(!0)},onBlur:function(){return L(!1)}}),(0,d.jsxs)("label",{htmlFor:"password",className:"mb-2 flex flex-auto justify-between",children:["Password",(0,d.jsx)(p.sez,{className:B?"valid":"hidden"}),(0,d.jsx)(o.IOM,{className:B||!y?"hidden":"invalid"})]}),(0,d.jsx)("input",{type:"password",id:"password",onChange:function(a){return z(a.target.value)},value:y,placeholder:"Da 8 a 24, [a-z, A-Z, 0-9, !@%$] 🔐",required:!0,"aria-invalid":B?"false":"true","aria-describedby":"pwdnote",onFocus:function(){return F(!0)},onBlur:function(){return F(!1)}}),(0,d.jsx)("button",{className:" text-medium easy-in-out mt-12 inline-flex w-full justify-center rounded-lg bg-beige-500 py-2 px-4 font-medium text-beige-50 shadow-lg transition duration-200 hover:bg-beige-600",disabled:!B||!H,children:"Registrati"})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsxs)("div",{className:"relative mx-2 py-1",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center border-beige-700",children:(0,d.jsx)("div",{className:"w-full border-t border-beige-700"})}),(0,d.jsx)("div",{className:"text-medium relative flex justify-center",children:(0,d.jsx)("span",{className:"bg-beige-100 px-2 text-beige-900",children:"Oppure continua con"})})]}),(0,d.jsx)("div",{className:"mt-5 grid grid-cols-2 gap-2",children:e&&Object.values(e).map(function(a){return(0,d.jsx)("div",{children:"Google"==a.name?(0,d.jsx)("button",{className:"text-medium easy-in-out inline-flex w-full justify-center rounded-lg bg-beige-500 py-2 px-4 font-medium text-beige-50 shadow-lg transition duration-200 hover:bg-beige-600",onClick:function(){(0,i.zB)(a.id)},children:(0,d.jsx)("svg",{className:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,d.jsx)("path",{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"})})})}):"Facebook"==a.name?(0,d.jsx)("button",{className:"text-medium easy-in-out inline-flex w-full justify-center rounded-lg bg-beige-500 py-2 px-4 font-medium text-beige-50 shadow-lg transition duration-200 hover:bg-beige-600",onClick:function(){(0,i.zB)(a.id)},children:(0,d.jsx)("svg",{className:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:(0,d.jsx)("path",{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"})})})}):void 0},a.name)})})]})]})]})})})})}var y=c(9008),z=!0;function A(a){var b=a.providers,c=(0,k.useContext)(l.Z);return console.log("🚀 - file: Login.tsx - line 11 - Login - loginInfoData",c),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(y.default,{children:[(0,d.jsx)("title",{children:"Login"}),(0,d.jsx)("link",{rel:"icon",href:"/question-solid.svg"})]}),(0,d.jsx)(f.Z,{}),(0,d.jsx)(x,{providers:b}),(0,d.jsx)(e.Z,{})]})}},1163:function(a,b,c){a.exports=c(387)}},function(a){a.O(0,[228,445,937,617,90,260,994,879,669,980,774,888,179],function(){return a(a.s=2657)}),_N_E=a.O()}])